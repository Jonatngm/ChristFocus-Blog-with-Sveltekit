import{c as k,a as v,f as $}from"../chunks/DBbh6i71.js";import"../chunks/By_quqKy.js";import{o as at}from"../chunks/9Wgh_Wd9.js";import{f as y,p as st,b as rt,e as ot,$ as lt,a0 as e,a1 as c,a2 as dt,a3 as t,m as d,a5 as L,o as j,a6 as it}from"../chunks/Gv26lf99.js";import{s as x}from"../chunks/CGn5TYOr.js";import{i as nt}from"../chunks/L_eDHKqI.js";import{I as H,e as ct,a as vt,s as pt,i as ut}from"../chunks/Dvb1pLFc.js";import{h as ft}from"../chunks/BgmTWRyC.js";import{i as ht}from"../chunks/Cu4e1Vm0.js";import{p as G}from"../chunks/DI6rd9QU.js";import{B as S,t as T}from"../chunks/DFprynn4.js";import{s as V}from"../chunks/ZjGFPQrt.js";import{l as q,s as B}from"../chunks/uKDsRmDl.js";function mt(p,r){const o=q(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]];H(p,B({name:"circle-plus"},()=>o,{get iconNode(){return i},children:(u,_)=>{var s=k(),n=y(s);V(n,r,"default",{},null),v(u,s)},$$slots:{default:!0}}))}function $t(p,r){const o=q(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];H(p,B({name:"square-pen"},()=>o,{get iconNode(){return i},children:(u,_)=>{var s=k(),n=y(s);V(n,r,"default",{},null),v(u,s)},$$slots:{default:!0}}))}function _t(p,r){const o=q(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];H(p,B({name:"trash-2"},()=>o,{get iconNode(){return i},children:(u,_)=>{var s=k(),n=y(s);V(n,r,"default",{},null),v(u,s)},$$slots:{default:!0}}))}var bt=$("<!> New Post",1),gt=$('<div class="flex items-center justify-center py-20"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div></div>'),xt=$('<tr class="border-b last:border-b-0"><td class="p-4"> </td><td class="p-4"><span> </span></td><td class="p-4"> </td><td class="p-4"> </td><td class="p-4 text-right"><div class="flex items-center justify-end gap-2"><a><!></a> <!></div></td></tr>'),yt=$('<div class="bg-card rounded-lg border"><div class="overflow-x-auto"><table class="w-full"><thead class="border-b"><tr><th class="text-left p-4">Title</th><th class="text-left p-4">Status</th><th class="text-left p-4">Views</th><th class="text-left p-4">Created</th><th class="text-right p-4">Actions</th></tr></thead><tbody></tbody></table></div></div>'),wt=$('<div class="min-h-screen bg-background"><div class="container mx-auto px-4 py-8"><div class="flex items-center justify-between mb-8"><h1 class="text-3xl font-bold">Admin Dashboard</h1> <a href="/admin/write"><!></a></div> <!></div></div>');function Bt(p,r){st(r,!1);let o=L([]),i=L(!0);async function u(){try{j(o,await G.getAllPosts())}catch(a){console.error("Error loading posts:",a),T.error("Failed to load posts")}finally{j(i,!1)}}async function _(a){if(confirm("Are you sure you want to delete this post?"))try{await G.deletePost(a),j(o,d(o).filter(l=>l.id!==a)),T.success("Post deleted successfully")}catch(l){console.error("Error deleting post:",l),T.error("Failed to delete post")}}at(u),ht();var s=wt();ft("1jef3w8",a=>{ot(()=>{lt.title="Admin Dashboard - The Truth Hub"})});var n=e(s),w=e(n),C=c(e(w),2),J=e(C);S(J,{children:(a,l)=>{var h=bt(),b=y(h);mt(b,{class:"w-4 h-4 mr-2"}),dt(),v(a,h)},$$slots:{default:!0}}),t(C),t(w);var K=c(w,2);{var O=a=>{var l=gt();v(a,l)},Q=a=>{var l=yt(),h=e(l),b=e(h),E=c(e(b));ct(E,5,()=>d(o),ut,(R,f)=>{var P=xt(),M=e(P),U=e(M,!0);t(M);var N=c(M),z=e(N),W=e(z,!0);t(z),t(N);var A=c(N),X=e(A,!0);t(A);var D=c(A),Y=e(D,!0);t(D);var F=c(D),I=e(F),g=e(I),Z=e(g);S(Z,{variant:"ghost",size:"sm",children:(m,et)=>{$t(m,{class:"w-4 h-4"})},$$slots:{default:!0}}),t(g);var tt=c(g,2);S(tt,{variant:"ghost",size:"sm",$$events:{click:()=>_(d(f).id)},children:(m,et)=>{_t(m,{class:"w-4 h-4 text-destructive"})},$$slots:{default:!0}}),t(I),t(F),t(P),it(m=>{x(U,d(f).title),vt(z,1,`px-2 py-1 rounded-full text-xs ${d(f).published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),x(W,d(f).published?"Published":"Draft"),x(X,d(f).views||0),x(Y,m),pt(g,"href",`/admin/edit/${d(f).id??""}`)},[()=>new Date(d(f).created_at).toLocaleDateString()]),v(R,P)}),t(E),t(b),t(h),t(l),v(a,l)};nt(K,a=>{d(i)?a(O):a(Q,!1)})}t(n),t(s),v(p,s),rt()}export{Bt as component};
